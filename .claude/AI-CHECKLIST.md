# AI 助手任务启动检查清单

> **目的**: 确保 AI 助手在每次任务开始前都遵循规范

---

## 📋 任务开始前 - 必做检查 (5步)

每次收到用户任务时,AI 助手必须按顺序完成:

### ✅ Step 1: 读取项目规范 (2分钟)

```bash
# 必读文件
1. .claude/CLAUDE.md - 项目规范总览
2. .claude/core/project-specific-rules.md - 项目特定规则
```

**检查点**:
- [ ] 已读取 CLAUDE.md
- [ ] 已读取 project-specific-rules.md
- [ ] 了解当前项目的技术栈和规范

### ✅ Step 2: 理解任务需求 (1分钟)

**检查点**:
- [ ] 明确任务目标是什么
- [ ] 确认任务范围(新增/修改/删除)
- [ ] 识别涉及哪些模块

### ✅ Step 3: 确认文档需求 (30秒)

根据 `.claude/core/documentation-standards.md`:

**需要创建/更新 guide.md 的情况**:
- [ ] 新增模块或功能
- [ ] 修改公共 API 或接口
- [ ] 重构代码结构

**需要更新 project-specific-rules.md 的情况**:
- [ ] 用户明确提出新规则
- [ ] 连续3次使用相同模式
- [ ] 做出技术决策

### ✅ Step 4: 设计实现方案 (2分钟)

**检查点**:
- [ ] 考虑至少 2 种实现方式
- [ ] 选择最优方案(安全、性能、可维护性)
- [ ] 确认是否需要询问用户

### ✅ Step 5: 创建 Todo 清单

如果任务包含 3+ 步骤,使用 TodoWrite 工具创建任务清单。

---

## 📋 开发过程中 - 持续检查

### ✅ 编写代码时

**检查点**:
- [ ] 遵循 project-specific-rules.md 中的规则
- [ ] AI 新增代码用 `--- ai start ---` 和 `--- ai end ---` 标记
- [ ] 使用 try-except 包裹所有外部调用
- [ ] 不修改原有逻辑(如果是集成任务)

### ✅ 代码完成后

**检查点**:
- [ ] 更新或创建 guide.md (如适用)
- [ ] 更新 project-specific-rules.md (如有新规则)
- [ ] 添加必要的注释和文档

---

## 📋 任务完成前 - 质量关卡 (5项)

**必须全部通过才能提交**:

- [ ] ✅ **Linter 零警告** (运行 linter)
- [ ] ✅ **类型检查零错误** (如适用)
- [ ] ✅ **测试已编写** (关键功能必须有测试)
- [ ] ✅ **文档已更新** (guide.md 已创建/更新)
- [ ] ✅ **规则已记录** (如有新规则)

---

## 📋 任务完成后 - 收尾工作

### ✅ 发送通知

```bash
ntfy send ntfy.zmddg.com/claude "任务完成:{任务描述} - {结果摘要}"
```

### ✅ 自查清单

- [ ] 所有 Todo 已标记为 completed
- [ ] 没有遗留的临时文件
- [ ] 代码符合项目规范

---

## 🚨 常见违规场景及纠正

### 场景 1: 直接开始写代码

❌ **错误**:
```
用户: "帮我实现 XXX 功能"
AI: "好的,让我开始写代码..."  ← 违规!
```

✅ **正确**:
```
用户: "帮我实现 XXX 功能"
AI: "我先读取项目规范..."
    → 读取 .claude/CLAUDE.md
    → 读取 .claude/core/project-specific-rules.md
    → 确认是否需要 guide.md
    → 设计实现方案
    → 开始写代码
```

### 场景 2: 忘记更新文档

❌ **错误**:
```
写完代码 → 直接完成任务  ← 违规! 没有创建 guide.md
```

✅ **正确**:
```
写完代码
    → 检查: 是否需要 guide.md? (新模块 = 需要)
    → 创建 guide.md
    → 完成任务
```

### 场景 3: 忘记记录新规则

❌ **错误**:
```
用户: "以后所有 API 都用这个格式"
AI: "好的,我记住了"  ← 违规! 没有记录到文件
```

✅ **正确**:
```
用户: "以后所有 API 都用这个格式"
AI: "好的,我会记录到 project-specific-rules.md"
    → 更新 project-specific-rules.md
    → 添加新规则
```

---

## 💡 快速自检口诀

**开始前 (5步)**:
1. 读规范
2. 理解任务
3. 确认文档
4. 设计方案
5. 创建 Todo

**进行中 (持续)**:
- 遵守规则
- 标记代码
- 保护调用

**完成前 (5关)**:
1. Linter
2. 类型检查
3. 测试
4. 文档
5. 规则

**完成后**:
- 发通知
- 做自查

---

## 📌 记住:

1. **每次任务开始前,必须先读取规范** - 这是强制要求!
2. **文档和代码同等重要** - guide.md 不是可选的
3. **规则要写下来** - 不要只放在 AI 的"记忆"里
4. **质量关卡不能跳过** - 测试、Linter、文档缺一不可

---

**最后更新**: 2025-12-18
**适用范围**: QuantFu 项目所有开发任务
**状态**: ✅ 强制执行
