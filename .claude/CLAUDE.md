# QuantFu AI 开发规范

> 精简版规范 - 只保留核心要求

---

## 🎯 核心规则 (只有 5 条)

### 1. 任务开始前
- 读取 `core/project-specific-rules.md` 了解项目特定规则
- 理解需求,设计方案

### 2. 编写代码时
- 遵循项目规范,保持代码简洁
- 不使用模拟数据 (除非明确要求)
- 集成第三方代码时采用非侵入式原则

### 3. 代码完成后
- 运行 linter (零错误,警告需评估)
- 运行测试 (新代码测试覆盖率 ≥ 80%)
  - **前端**: `cd frontend && npm test`
  - **后端**: `cd backend && pytest`
- 类型检查零错误 (如适用)

### 4. 文档要求
- **复杂模块或公共 API**: 创建 guide.md
- **简单功能**: 代码注释足够,不强制文档
- **新策略模块**: 按照策略目录结构规范创建文档

### 5. 任务完成后
- 发送通知: `ntfy send ntfy.zmddg.com/claude "任务完成:{任务描述} - {结果摘要}"`
- 清理临时文件

---

## 📋 项目信息

- **项目**: QuantFu - 期货交易管理平台
- **技术栈**:
  - 前端: Next.js 15 + React + TypeScript + Tailwind CSS
  - 后端: Python + FastAPI + Supabase (PostgreSQL)
  - 策略: Python (极星量化平台集成)
- **团队**: allen + AI

---

## 🤖 AI 权限

### ✅ 允许的操作 (无需确认)
- 直接修改代码
- 安装/更新依赖
- 创建 Git 提交
- 运行测试和构建

### ⚠️ 需要说明的操作
- 删除文件或模块
- 修改核心架构
- 更改环境变量配置

### ❌ 禁止的操作
- 提交包含敏感信息的代码
- 绕过测试直接部署
- 强制推送到主分支

---

## 📋 项目特定规则系统

本项目使用 **[core/project-specific-rules.md](core/project-specific-rules.md)** 记录开发规则和技术决策。

### 何时记录规则?

**只有当你明确说 "记录这个规则" 或 "以后都按这个规则" 时才记录。**

不会自动触发记录 (删除了"连续3次"、"重复模式"等模糊判断)。

### 开发流程
1. **任务开始前**: 读取 project-specific-rules.md
2. **进行中**: 发现新规则或重复模式时,询问是否记录
3. **完成后**: 如果你明确要求,AI 会记录规则

---

## 🚨 行为准则

### 基本原则
- **语言**: 用中文回答
- **审视态度**: 指出我输入的潜在问题,给出框架外的建议
- **清醒反馈**: 如果我说的太离谱,直接指出
- **真实数据**: 不使用模拟数据

### 遇到问题时
- **不要猜测** - 不确定时询问
- **不要隐藏** - 发现问题立即告知
- **不要跳过** - 测试失败必须修复
- **不要妥协** - 安全性问题零容忍

### 避免过度工程
- 只做明确要求的功能,不添加额外特性
- 不修改无关代码
- 不添加不必要的抽象
- 简单问题用简单方案

---

## 📚 详细规范索引

核心规范位于 `.claude/core/` 目录:

- **[架构设计](core/architecture-principles.md)** - 分层架构、SOLID、设计模式
- **[代码质量](core/code-quality.md)** - 命名规范、函数设计、重构策略
- **[安全原则](core/security-principles.md)** - OWASP Top 10、认证授权、数据保护
- **[测试策略](core/testing-strategy.md)** ⭐ - Playwright MCP 自动化测试、测试金字塔、覆盖率要求
- **[Git 工作流](core/git-workflow.md)** - 分支策略、Conventional Commits
- **[文档标准](core/documentation-standards.md)** - 模块文档、API 文档规范
- **[项目特定规则](core/project-specific-rules.md)** ⭐ - 动态规则系统

---

## ✅ 质量关卡

提交代码前必须通过:

- [ ] Linter 零错误 (警告需评估,不强制零警告)
- [ ] 类型检查零错误 (如适用)
- [ ] 新代码测试覆盖率 ≥ 80%
- [ ] 所有测试通过
  - 前端 E2E 测试: `cd frontend && npm test`
  - 后端单元测试: `cd backend && pytest`
- [ ] 文档已更新 (如需要)

**测试要求详见**: [测试策略](core/testing-strategy.md)

---

**最后更新**: 2025-12-19
**配置状态**: ✅ 已启用
**测试配置**: ✅ Playwright MCP 自动化测试已配置
