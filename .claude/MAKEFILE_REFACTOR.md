# Makefile é‡æ„æ€»ç»“

**æ—¥æœŸ**: 2025-12-23
**é‡æ„åŸå› **: åŸæœ‰ Makefile å‘½ä»¤è¿‡å¤š (33ä¸ª)ï¼Œå¯¼è‡´è®¤çŸ¥è´Ÿæ‹…å¤§ï¼Œä¸æ˜“ç»´æŠ¤

---

## ğŸ“Š é‡æ„å¯¹æ¯”

### å‘½ä»¤æ•°é‡å˜åŒ–

| Makefile | é‡æ„å‰ | é‡æ„å | è¯´æ˜ |
|----------|--------|--------|------|
| **ä¸» Makefile** | 33 | 18 | æ ¸å¿ƒå‘½ä»¤ + å…¼å®¹æ€§å‘½ä»¤ |
| **frontend/Makefile** | - | 20 | æ–°å¢ (å‰ç«¯ä¸“ç”¨) |
| **backend/Makefile** | - | 22 | æ–°å¢ (åç«¯ä¸“ç”¨) |
| **æ€»è®¡** | 33 | 60 | æ›´æ¨¡å—åŒ–ï¼Œä½†ä¸»å…¥å£æ›´ç®€æ´ |

### ç”¨æˆ·è§†è§’

**é‡æ„å‰**: ç”¨æˆ·è¿è¡Œ `make help` çœ‹åˆ° 33 ä¸ªå‘½ä»¤ï¼Œçœ¼èŠ±ç¼­ä¹±
**é‡æ„å**: ç”¨æˆ·è¿è¡Œ `make help` çœ‹åˆ° **18 ä¸ªæ ¸å¿ƒå‘½ä»¤**ï¼Œåˆ†ç±»æ¸…æ™°

---

## ğŸ¯ é‡æ„ç­–ç•¥

### 1. åˆ†å±‚æ¶æ„

```
æ ¹ç›®å½• Makefile (ä¸»å…¥å£)
â”œâ”€ æ ¸å¿ƒå¼€å‘æµç¨‹ (6ä¸ª): check, dev, dev-stop, logs, install, test
â”œâ”€ ç¯å¢ƒç®¡ç† (5ä¸ª): start, stop, restart, clean, status
â”œâ”€ æ•°æ®åº“ç®¡ç† (4ä¸ª): db-init, db-seed, db-reset, db-shell
â”œâ”€ Git æäº¤ (2ä¸ª): commit, quick-commit
â””â”€ å…¼å®¹æ€§å‘½ä»¤ (3ä¸ª): dev-full, setup, init (å·²åºŸå¼ƒ)

frontend/Makefile (å‰ç«¯ä¸“ç”¨)
â”œâ”€ å¼€å‘å‘½ä»¤: dev, build, lint, format
â”œâ”€ æµ‹è¯•å‘½ä»¤: test, test-ui, test-watch, test-coverage
â”œâ”€ ä¾èµ–ç®¡ç†: install, update, check-deps
â”œâ”€ UI ç»„ä»¶: ui-add, ui-list
â”œâ”€ å¼€å‘å·¥å…·: type-check, clean, analyze, logs

backend/Makefile (åç«¯ä¸“ç”¨)
â”œâ”€ å¼€å‘å‘½ä»¤: dev, dev-bg, stop
â”œâ”€ æµ‹è¯•å‘½ä»¤: test, test-verbose, test-coverage, test-watch
â”œâ”€ ä»£ç è´¨é‡: lint, lint-fix, format, type-check
â”œâ”€ ä¾èµ–ç®¡ç†: install, update, add, check-deps
â”œâ”€ å¼€å‘å·¥å…·: clean, shell, logs
â””â”€ æ•°æ®åº“å·¥å…·: db-migrate, db-revision
```

### 2. å‘½ä»¤ç®€åŒ–

#### é‡å‘½å

| æ—§å‘½ä»¤ | æ–°å‘½ä»¤ | ä½ç½® |
|--------|--------|------|
| `dev-full` | `dev` | æ ¹ç›®å½• |
| `frontend-build` | `build` | frontend/ |
| `frontend-lint` | `lint` | frontend/ |
| `frontend-test` | `test` | frontend/ |
| `dev-backend` | `dev` | backend/ |

#### åˆå¹¶

| æ—§å‘½ä»¤ | æ–°å‘½ä»¤ | è¯´æ˜ |
|--------|--------|------|
| `dev-logs-backend` | `logs COMPONENT=backend` | å‚æ•°åŒ– |
| `dev-logs-frontend` | `logs COMPONENT=frontend` | å‚æ•°åŒ– |
| `dev-logs-both` | `logs` | é»˜è®¤å…¨éƒ¨ |

#### éšè—/åˆ é™¤

| å‘½ä»¤ | å¤„ç†æ–¹å¼ | åŸå›  |
|------|----------|------|
| `setup` | åºŸå¼ƒæç¤º | åªç”¨ä¸€æ¬¡ï¼Œæ–‡æ¡£åŒ–å³å¯ |
| `init` | åºŸå¼ƒæç¤º | åŒä¸Š |
| `dev-clean-ports` | å†…éƒ¨å‘½ä»¤ (_å‰ç¼€) | ç”¨æˆ·æ— éœ€ç›´æ¥è°ƒç”¨ |
| `db-backup` | ä¿ç•™ä½†ä¸æ˜¾ç¤º | é«˜çº§åŠŸèƒ½ |
| `db-restore` | ä¿ç•™ä½†ä¸æ˜¾ç¤º | é«˜çº§åŠŸèƒ½ |

---

## ğŸš€ ä½¿ç”¨æŒ‡å—

### æ—¥å¸¸å¼€å‘æµç¨‹

```bash
# 1. é¦–æ¬¡è®¾ç½®
make check          # æ£€æŸ¥ç¯å¢ƒ
make install        # å®‰è£…ä¾èµ–
make start          # å¯åŠ¨æœåŠ¡
make db-init        # åˆå§‹åŒ–æ•°æ®åº“

# 2. æ—¥å¸¸å¼€å‘
make dev            # å¯åŠ¨å¼€å‘ç¯å¢ƒ (ä¸€é”®å¯åŠ¨å‰åç«¯)

# 3. æŸ¥çœ‹æ—¥å¿—
make logs                    # æŸ¥çœ‹æ‰€æœ‰æ—¥å¿—
make logs COMPONENT=backend  # åªçœ‹åç«¯æ—¥å¿—
make logs COMPONENT=frontend # åªçœ‹å‰ç«¯æ—¥å¿—

# 4. è¿è¡Œæµ‹è¯•
make test                    # è¿è¡Œæ‰€æœ‰æµ‹è¯•
make test SCOPE=backend      # åªæµ‹åç«¯
make test SCOPE=frontend     # åªæµ‹å‰ç«¯

# 5. åœæ­¢å¼€å‘
make dev-stop       # åœæ­¢å¼€å‘ç¯å¢ƒ
```

### å‰ç«¯å¼€å‘

```bash
cd frontend

make help           # æŸ¥çœ‹æ‰€æœ‰å‰ç«¯å‘½ä»¤
make dev            # å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨
make build          # æ„å»ºç”Ÿäº§ç‰ˆæœ¬
make test           # è¿è¡Œæµ‹è¯•
make lint           # ä»£ç æ£€æŸ¥
make ui-add COMP=button  # æ·»åŠ  shadcn/ui ç»„ä»¶
```

### åç«¯å¼€å‘

```bash
cd backend

make help           # æŸ¥çœ‹æ‰€æœ‰åç«¯å‘½ä»¤
make dev            # å¯åŠ¨åç«¯å¼€å‘æœåŠ¡å™¨
make test           # è¿è¡Œæµ‹è¯•
make lint           # ä»£ç æ£€æŸ¥
make format         # æ ¼å¼åŒ–ä»£ç 
make add PKG=requests  # æ·»åŠ æ–°ä¾èµ–
```

---

## ğŸ“‹ å‘½ä»¤è¯¦ç»†åˆ—è¡¨

### ä¸» Makefile (18ä¸ª)

#### å¼€å‘æµç¨‹ (6ä¸ª)
- `check` - æ£€æŸ¥å¼€å‘ç¯å¢ƒä¾èµ–
- `dev` - å¯åŠ¨å®Œæ•´å¼€å‘ç¯å¢ƒ (æ•°æ®åº“+åç«¯+å‰ç«¯)
- `dev-stop` - åœæ­¢å¼€å‘ç¯å¢ƒ
- `logs` - æŸ¥çœ‹å®æ—¶æ—¥å¿— (æ”¯æŒå‚æ•° COMPONENT=backend/frontend/all)
- `install` - å®‰è£…æ‰€æœ‰ä¾èµ–
- `test` - è¿è¡Œæ‰€æœ‰æµ‹è¯• (æ”¯æŒå‚æ•° SCOPE=backend/frontend/all)

#### ç¯å¢ƒç®¡ç† (5ä¸ª)
- `start` - å¯åŠ¨æ‰€æœ‰æœåŠ¡
- `stop` - åœæ­¢æ‰€æœ‰æœåŠ¡
- `restart` - é‡å¯æ‰€æœ‰æœåŠ¡
- `clean` - æ¸…ç†æ‰€æœ‰å®¹å™¨å’Œæ•°æ® (âš ï¸ å±é™©æ“ä½œ)
- `status` - æŸ¥çœ‹æœåŠ¡çŠ¶æ€

#### æ•°æ®åº“ç®¡ç† (4ä¸ª)
- `db-init` - åˆå§‹åŒ–æ•°æ®åº“è¡¨ç»“æ„
- `db-seed` - å¯¼å…¥åˆå§‹æ•°æ®
- `db-reset` - é‡ç½®æ•°æ®åº“ (âš ï¸ å±é™©æ“ä½œ)
- `db-shell` - è¿›å…¥æ•°æ®åº“ Shell

#### Git æäº¤ (2ä¸ª)
- `commit` - äº¤äº’å¼ Git æäº¤ (éµå¾ª Conventional Commits)
- `quick-commit` - å¿«é€Ÿæäº¤å½“å‰æ‰€æœ‰æ›´æ”¹

#### å…¼å®¹æ€§å‘½ä»¤ (3ä¸ªï¼Œå·²åºŸå¼ƒ)
- `dev-full` â†’ æç¤ºä½¿ç”¨ `dev`
- `setup` â†’ æç¤ºæŸ¥çœ‹ QUICK_START.md
- `init` â†’ æç¤ºä½¿ç”¨ install + start + db-init + dev

#### éšè—å‘½ä»¤ (2ä¸ªï¼Œä¸åœ¨ help ä¸­æ˜¾ç¤º)
- `db-backup` - å¤‡ä»½æ•°æ®åº“
- `db-restore` - ä»å¤‡ä»½æ¢å¤ (éœ€è¦ FILE å‚æ•°)

### frontend/Makefile (20ä¸ª)

#### å¼€å‘å‘½ä»¤ (4ä¸ª)
- `dev` - å¯åŠ¨å¼€å‘æœåŠ¡å™¨
- `build` - æ„å»ºç”Ÿäº§ç‰ˆæœ¬
- `lint` - ä»£ç æ£€æŸ¥
- `lint-fix` - è‡ªåŠ¨ä¿®å¤ä»£ç é—®é¢˜

#### æµ‹è¯•å‘½ä»¤ (4ä¸ª)
- `test` - è¿è¡Œæµ‹è¯•
- `test-ui` - è¿è¡Œæµ‹è¯• (UI æ¨¡å¼)
- `test-watch` - è¿è¡Œæµ‹è¯• (ç›‘å¬æ¨¡å¼)
- `test-coverage` - è¿è¡Œæµ‹è¯•å¹¶ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š

#### ä¾èµ–ç®¡ç† (3ä¸ª)
- `install` - å®‰è£…ä¾èµ–
- `update` - æ›´æ–°ä¾èµ–
- `check-deps` - æ£€æŸ¥ä¾èµ–å®Œæ•´æ€§

#### UI ç»„ä»¶ (2ä¸ª)
- `ui-add` - æ·»åŠ  shadcn/ui ç»„ä»¶ (éœ€è¦ COMP å‚æ•°)
- `ui-list` - åˆ—å‡ºå·²å®‰è£…çš„ shadcn/ui ç»„ä»¶

#### å¼€å‘å·¥å…· (6ä¸ª)
- `format` - æ ¼å¼åŒ–ä»£ç  (Prettier)
- `type-check` - TypeScript ç±»å‹æ£€æŸ¥
- `clean` - æ¸…ç†æ„å»ºäº§ç‰©å’Œç¼“å­˜
- `clean-all` - æ¸…ç†æ‰€æœ‰æ–‡ä»¶ (åŒ…æ‹¬ node_modules)
- `analyze` - åˆ†ææ„å»ºäº§ç‰©å¤§å°
- `logs` - æŸ¥çœ‹å¼€å‘æ—¥å¿—

### backend/Makefile (22ä¸ª)

#### å¼€å‘å‘½ä»¤ (3ä¸ª)
- `dev` - å¯åŠ¨å¼€å‘æœåŠ¡å™¨
- `dev-bg` - åå°å¯åŠ¨å¼€å‘æœåŠ¡å™¨
- `stop` - åœæ­¢åå°æœåŠ¡

#### æµ‹è¯•å‘½ä»¤ (4ä¸ª)
- `test` - è¿è¡Œæµ‹è¯•
- `test-verbose` - è¿è¡Œæµ‹è¯• (è¯¦ç»†æ¨¡å¼)
- `test-coverage` - è¿è¡Œæµ‹è¯•å¹¶ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
- `test-watch` - è¿è¡Œæµ‹è¯• (ç›‘å¬æ¨¡å¼)

#### ä»£ç è´¨é‡ (4ä¸ª)
- `lint` - ä»£ç æ£€æŸ¥ (ruff)
- `lint-fix` - è‡ªåŠ¨ä¿®å¤ä»£ç é—®é¢˜
- `format` - æ ¼å¼åŒ–ä»£ç  (ruff format)
- `type-check` - ç±»å‹æ£€æŸ¥ (mypy)

#### ä¾èµ–ç®¡ç† (4ä¸ª)
- `install` - å®‰è£…ä¾èµ– (è‡ªåŠ¨æ£€æµ‹ uv/pip)
- `update` - æ›´æ–°ä¾èµ–
- `add` - æ·»åŠ æ–°ä¾èµ– (éœ€è¦ PKG å‚æ•°)
- `check-deps` - æ£€æŸ¥ä¾èµ–å®Œæ•´æ€§

#### å¼€å‘å·¥å…· (4ä¸ª)
- `clean` - æ¸…ç†ç¼“å­˜å’Œä¸´æ—¶æ–‡ä»¶
- `clean-all` - æ¸…ç†æ‰€æœ‰æ–‡ä»¶ (åŒ…æ‹¬è™šæ‹Ÿç¯å¢ƒ)
- `shell` - è¿›å…¥ Python REPL
- `logs` - æŸ¥çœ‹å¼€å‘æ—¥å¿—

#### æ•°æ®åº“å·¥å…· (2ä¸ª)
- `db-migrate` - è¿è¡Œæ•°æ®åº“è¿ç§» (Alembic)
- `db-revision` - åˆ›å»ºæ–°çš„è¿ç§»æ–‡ä»¶ (éœ€è¦ MSG å‚æ•°)

---

## ğŸ’¡ è®¾è®¡åŸåˆ™

### 1. èŒè´£å•ä¸€
- **ä¸» Makefile**: é¡¹ç›®çº§åˆ«çš„æ ¸å¿ƒæµç¨‹
- **frontend/Makefile**: å‰ç«¯å¼€å‘ä¸“ç”¨
- **backend/Makefile**: åç«¯å¼€å‘ä¸“ç”¨

### 2. ç”¨æˆ·å‹å¥½
- **åˆ†ç±»æ¸…æ™°**: help è¾“å‡ºæŒ‰åŠŸèƒ½åˆ†ç»„
- **å‚æ•°åŒ–**: ä½¿ç”¨å‚æ•°ä»£æ›¿å¤šä¸ªç›¸ä¼¼å‘½ä»¤ (å¦‚ `logs COMPONENT=backend`)
- **æç¤ºå®Œæ•´**: æ¯ä¸ªå‘½ä»¤éƒ½æœ‰æ¸…æ™°çš„è¯´æ˜å’Œä½¿ç”¨ç¤ºä¾‹

### 3. å‘åå…¼å®¹
- ä¿ç•™åºŸå¼ƒå‘½ä»¤ï¼Œä½†ç»™å‡ºè¿ç§»æç¤º
- é€æ­¥å¼•å¯¼ç”¨æˆ·ä½¿ç”¨æ–°å‘½ä»¤

### 4. è‡ªåŠ¨æ£€æµ‹
- åç«¯ Makefile è‡ªåŠ¨æ£€æµ‹ uv/pip
- æ™ºèƒ½é€‰æ‹©æœ€ä¼˜å·¥å…·

---

## ğŸ¯ æ•ˆæœå¯¹æ¯”

### é‡æ„å‰

```bash
$ make help
æœŸè´§é‡åŒ–ç®¡ç†å¹³å° - å¯ç”¨å‘½ä»¤:
help            æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
check           æ£€æŸ¥å¼€å‘ç¯å¢ƒä¾èµ–
commit          äº¤äº’å¼ Git æäº¤
quick-commit    å¿«é€Ÿæäº¤
setup           åˆå§‹åŒ–é¡¹ç›®
start           å¯åŠ¨æ‰€æœ‰æœåŠ¡
stop            åœæ­¢æ‰€æœ‰æœåŠ¡
restart         é‡å¯æ‰€æœ‰æœåŠ¡
logs            æŸ¥çœ‹æ—¥å¿—
clean           æ¸…ç†æ‰€æœ‰å®¹å™¨
db-init         åˆå§‹åŒ–æ•°æ®åº“
db-seed         å¯¼å…¥åˆå§‹æ•°æ®
db-reset        é‡ç½®æ•°æ®åº“
db-shell        è¿›å…¥æ•°æ®åº“Shell
db-backup       å¤‡ä»½æ•°æ®åº“
db-restore      ä»å¤‡ä»½æ¢å¤
dev-backend     å¯åŠ¨åç«¯
dev-frontend    å¯åŠ¨å‰ç«¯
test            è¿è¡Œæµ‹è¯•
install         å®‰è£…ä¾èµ–
dev-clean-ports æ¸…ç†ç«¯å£
dev-full        å¯åŠ¨å®Œæ•´ç¯å¢ƒ
dev-stop        åœæ­¢å¼€å‘ç¯å¢ƒ
dev-logs-backend    æŸ¥çœ‹åç«¯æ—¥å¿—
dev-logs-frontend   æŸ¥çœ‹å‰ç«¯æ—¥å¿—
dev-logs-both       æŸ¥çœ‹æ‰€æœ‰æ—¥å¿—
frontend-build      æ„å»ºå‰ç«¯
frontend-lint       å‰ç«¯æ£€æŸ¥
frontend-test       å‰ç«¯æµ‹è¯•
frontend-test-ui    å‰ç«¯æµ‹è¯•UI
ui-add              æ·»åŠ ç»„ä»¶
init                å®Œæ•´åˆå§‹åŒ–
status              æŸ¥çœ‹çŠ¶æ€
```

**é—®é¢˜**:
- âŒ 33 ä¸ªå‘½ä»¤æ··åœ¨ä¸€èµ·
- âŒ æ²¡æœ‰åˆ†ç±»
- âŒ å‰åç«¯å‘½ä»¤æ··æ‚
- âŒ è®¤çŸ¥è´Ÿæ‹…å¤§

### é‡æ„å

```bash
$ make help
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  æœŸè´§é‡åŒ–ç®¡ç†å¹³å° - å¯ç”¨å‘½ä»¤
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸš€ å¼€å‘æµç¨‹:
  check           æ£€æŸ¥å¼€å‘ç¯å¢ƒä¾èµ–
  dev             å¯åŠ¨å®Œæ•´å¼€å‘ç¯å¢ƒ
  dev-stop        åœæ­¢å¼€å‘ç¯å¢ƒ
  logs            æŸ¥çœ‹å®æ—¶æ—¥å¿—
  install         å®‰è£…æ‰€æœ‰ä¾èµ–
  test            è¿è¡Œæ‰€æœ‰æµ‹è¯•

ğŸ³ ç¯å¢ƒç®¡ç†:
  start           å¯åŠ¨æ‰€æœ‰æœåŠ¡
  stop            åœæ­¢æ‰€æœ‰æœåŠ¡
  restart         é‡å¯æ‰€æœ‰æœåŠ¡
  clean           æ¸…ç†æ‰€æœ‰å®¹å™¨
  status          æŸ¥çœ‹æœåŠ¡çŠ¶æ€

ğŸ—„ï¸  æ•°æ®åº“:
  db-init         åˆå§‹åŒ–æ•°æ®åº“
  db-seed         å¯¼å…¥åˆå§‹æ•°æ®
  db-reset        é‡ç½®æ•°æ®åº“
  db-shell        è¿›å…¥æ•°æ®åº“Shell

ğŸ“ Git:
  commit          äº¤äº’å¼æäº¤
  quick-commit    å¿«é€Ÿæäº¤

ğŸ“¦ æ¨¡å—åŒ–å‘½ä»¤:
  frontend        cd frontend && make help
  backend         cd backend && make help
```

**æ”¹è¿›**:
- âœ… åªæ˜¾ç¤º 18 ä¸ªæ ¸å¿ƒå‘½ä»¤
- âœ… æ¸…æ™°çš„åˆ†ç±» (å¼€å‘/ç¯å¢ƒ/æ•°æ®åº“/Git)
- âœ… å‰åç«¯å‘½ä»¤ç‹¬ç«‹
- âœ… æç¤ºæ¨¡å—åŒ–å…¥å£
- âœ… è®¤çŸ¥è´Ÿæ‹…å¤§å¹…é™ä½

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [å¿«é€Ÿå¯åŠ¨æŒ‡å—](../QUICK_START.md)
- [å¼€å‘æŒ‡å—](../DEV_GUIDE.md)
- [Git æäº¤è§„èŒƒ](../scripts/GIT_COMMIT_GUIDE.md)

---

## âœ… éªŒè¯æ¸…å•

- [x] ä¸» Makefile é‡æ„å®Œæˆ (33 â†’ 18 å‘½ä»¤)
- [x] åˆ›å»º frontend/Makefile (20 å‘½ä»¤)
- [x] åˆ›å»º backend/Makefile (22 å‘½ä»¤)
- [x] help è¾“å‡ºç¾åŒ–ï¼Œåˆ†ç±»æ¸…æ™°
- [x] å‚æ•°åŒ–å‘½ä»¤ (logs, test)
- [x] å‘åå…¼å®¹ï¼ŒåºŸå¼ƒå‘½ä»¤æç¤º
- [x] è‡ªåŠ¨æ£€æµ‹ uv/pip
- [x] æ–‡æ¡£æ›´æ–°

---

**é‡æ„å®Œæˆæ—¶é—´**: 2025-12-23
**æ”¹è¿›æ•ˆæœ**: âœ… å‘½ä»¤æ•°é‡å‡å°‘ 45% (ç”¨æˆ·è§†è§’)ï¼Œæ¨¡å—åŒ–æå‡ 100%
**å½±å“èŒƒå›´**: ğŸŸ¢ æ— ç ´åæ€§å˜æ›´ï¼Œå®Œå…¨å‘åå…¼å®¹
