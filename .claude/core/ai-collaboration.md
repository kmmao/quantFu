# AI 协作规范

> ⚠️ **待补充文件** - 本文件是占位文件,请根据项目需求补充完整内容

## 🚧 使用前必读

本文件是 **sfcommon 通用规范框架** 的一部分,但尚未完全编写。

**在开始 AI 辅助开发前,你需要:**

1. 定义 AI 助手的权限和职责
2. 制定 AI 工作流程规范
3. 配置项目特定的 AI 行为准则

---

## 📋 必须补充的内容

### 1. 项目信息

请填写项目基本信息:

```markdown
## 项目信息

- **项目名称**: [填写]
- **项目类型**: [Web 应用 / 移动端 / 后端 API / CLI 工具 / 库]
- **主要技术栈**: [填写]
- **团队规模**: [个人 / 2-5人 / 6-10人 / 10+人]
```

### 2. AI 权限配置

定义 AI 可以做什么,不可以做什么:

```markdown
## AI 权限

### ✅ 允许的操作 (无需人工确认)
- [ ] 直接修改代码
- [ ] 安装/更新依赖
- [ ] 创建 Git 提交
- [ ] 运行测试
- [ ] 执行数据库迁移

### ⚠️ 需要说明的操作
- [ ] 删除文件或模块
- [ ] 修改核心架构
- [ ] 修改环境变量配置

### ❌ 禁止的操作
- [ ] 提交敏感信息
- [ ] 绕过测试直接部署
- [ ] 强制推送到主分支
```

### 3. 开发规范引用

指定 AI 必须遵循的规范文件:

```markdown
## 必须遵循的规范

AI 助手在开发时,必须严格遵循以下规范:

- [ ] [架构设计](architecture-principles.md)
- [ ] [代码质量](code-quality.md)
- [ ] [安全原则](security-principles.md)
- [ ] [测试策略](testing-strategy.md)
- [ ] [Git 工作流](git-workflow.md)
- [ ] [文档标准](documentation-standards.md)
- [ ] [项目特定规则](project-specific-rules.md) ⭐ **动态规则系统**
```

### 4. 项目特定规则系统 (重要!)

**配置项目规则动态记录机制:**

```markdown
## 📋 项目特定规则系统

本项目使用 **[project-specific-rules.md](project-specific-rules.md)** 动态记录开发过程中的规则和约定。

### AI 助手行为准则

**当开发过程中出现以下情况时,你必须主动将规则记录到 `project-specific-rules.md`:**

1. **用户明确提出规则** - "以后所有XX都要按XX格式"
2. **重复出现的模式** - 连续3次相同的处理方式
3. **技术决策** - "我们决定使用XX而不是YY"
4. **命名约定** - "所有XX都以XX开头/结尾"
5. **代码组织** - "XX类型的文件都放在XX目录"
6. **业务规则** - "当XX情况下必须XX处理"

### 记录格式

使用 `project-specific-rules.md` 中定义的标准格式:
- 规则类别 (目录结构/命名约定/技术决策等)
- 制定时间
- 适用范围
- 规则内容
- 示例
- 原因

### 开发流程集成

**每次执行任务时:**
1. **开始前** - 先读取 `project-specific-rules.md`,了解已有规则
2. **进行中** - 发现新规则或重复模式时,主动询问用户是否记录
3. **完成后** - 如果制定了新规则,立即更新文件

详细说明见: [project-specific-rules.md](project-specific-rules.md)
```

---

## 📚 通用 AI 协作原则 (已提供)

以下是**项目无关**的 AI 协作最佳实践:

### 工作流程

#### 编写代码前
1. **理解需求** - 明确要解决的问题
2. **阅读相关规范** - 查阅项目规范文档
3. **探索现有代码** - 了解现有实现和模式
4. **设计方案** - 考虑多种实现方式,选择最优解

#### 编写代码时
1. **遵循规范** - 严格遵守代码质量规范
2. **安全第一** - 应用安全原则的所有要求
3. **类型安全** - 使用类型系统 (如适用)
4. **简洁优雅** - 避免过度工程,保持可读性

#### 编写代码后
1. **编写测试** - 按测试策略要求编写测试
2. **更新文档** - 更新相关模块的文档
3. **代码自查** - 检查安全性、性能、可维护性
4. **规范提交** - 按 Git 工作流规范提交

### 质量关卡

AI 提交代码前,必须通过以下检查:

- [ ] ✅ ESLint/Linter 零警告
- [ ] ✅ TypeScript/类型检查 零错误
- [ ] ✅ 测试覆盖率达标
- [ ] ✅ 所有测试通过
- [ ] ✅ 文档已更新

### 错误处理策略

遇到问题时:

1. **不要猜测** - 不确定时,明确询问用户
2. **不要隐藏** - 发现潜在问题,立即告知
3. **不要跳过** - 测试失败必须修复,不能忽略
4. **不要妥协** - 安全性问题零容忍

---

## ✅ 完成检查清单

在开始 AI 协作开发前,请确认:

- [ ] 已填写项目信息
- [ ] 已配置 AI 权限
- [ ] 已指定必须遵循的规范
- [ ] 已告知 AI 项目的技术栈
- [ ] 已配置 MCP 服务器 (如需要)

---

## 🔗 MCP 集成 (可选)

如果使用 Model Context Protocol,请配置:

```markdown
## MCP 服务器配置

本项目使用以下 MCP 服务器:

- [ ] **filesystem**: 访问项目文件
- [ ] **memory**: 持久化记忆项目上下文
- [ ] **database**: [如使用数据库 MCP,填写类型]
- [ ] **github**: GitHub 集成

配置方法见: [../mcp/README.md](../mcp/README.md)
```

---

## 📝 示例配置

### 示例 1: Next.js Web 项目

```markdown
## 项目信息
- 项目名称: MyApp
- 项目类型: Web 全栈应用
- 主要技术栈: Next.js 14 + TypeScript + Supabase
- 团队规模: 2-5人

## AI 权限
✅ 允许: 修改代码、安装依赖、创建提交、运行测试
⚠️  需确认: 删除文件、修改架构
❌ 禁止: 提交敏感信息、强制推送

## 必须遵循的规范
- core/architecture-principles.md
- core/code-quality.md
- core/security-principles.md
- core/testing-strategy.md
- core/project-specific-rules.md ⭐

## 项目特定规则系统
在本项目开发过程中,当我提出规则或你发现重复模式时,
请主动将规则记录到 .claude/core/project-specific-rules.md 文件中。

每次开始任务前,请先读取该文件了解已有规则。

## 项目特定要求
- 所有组件必须是 React Server Components (除非必须用 Client)
- 数据库操作必须通过 RLS 保护
- 测试覆盖率 ≥ 80%
```

### 示例 2: Python CLI 工具

```markdown
## 项目信息
- 项目名称: MyCLI
- 项目类型: CLI 工具
- 主要技术栈: Python 3.11 + Click + SQLite
- 团队规模: 个人

## AI 权限
✅ 允许: 所有操作 (个人项目)

## 必须遵循的规范
- core/code-quality.md (Python 风格)
- core/testing-strategy.md (pytest)
- core/project-specific-rules.md ⭐

## 项目特定规则系统
启用规则动态记录系统。当制定新规则或发现重复模式时,
请主动记录到 project-specific-rules.md。

## 项目特定要求
- 使用 Black 格式化
- 使用 mypy 类型检查
- 命令行参数使用 Click
```

---

## 🔄 持续改进

在项目进行过程中,根据实际情况调整 AI 协作规范:

- 记录 AI 常犯的错误,添加到禁止清单
- 发现好的实践,添加到推荐清单
- 定期回顾和更新规范

---

**⚠️ 重要**: 删除本提示部分,替换为项目实际的 AI 协作规范!

## 📝 快速开始提示

向 AI 助手提问:

```
请帮我为 [项目名称] 补充 ai-collaboration.md 文件。

项目信息:
- 名称: [填写]
- 类型: [Web/移动端/后端/CLI/库]
- 技术栈: [填写]
- 团队规模: [填写]

请根据最佳实践,提供完整的 AI 协作规范。

**重要**: 请启用项目特定规则系统 (project-specific-rules.md),
在开发过程中自动记录规则和技术决策。
```
