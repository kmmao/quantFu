# 测试策略

> ⚠️ **待补充文件** - 本文件是占位文件,请根据项目需求补充完整内容

## 🚧 使用前必读

本文件是 **sfcommon 通用规范框架** 的一部分,但尚未完全编写。

**在开始项目开发前,你需要:**

1. 根据项目技术栈补充测试框架配置
2. 定义测试覆盖率要求
3. 制定测试命名规范

---

## 📋 必须补充的内容

### 1. 项目技术栈

请填写你的项目使用的测试工具:

```markdown
## 测试技术栈

- **单元测试框架**: [填写: Vitest / Jest / pytest / Go testing / etc.]
- **集成测试框架**: [填写]
- **E2E 测试框架**: [填写: Playwright / Cypress / Selenium / etc.]
- **Mock 库**: [填写: jest.fn / sinon / unittest.mock / etc.]
- **测试覆盖率工具**: [填写: c8 / Istanbul / coverage.py / etc.]
```

### 2. 测试覆盖率要求

```markdown
## 覆盖率目标

| 代码类型 | 最低覆盖率 | 目标覆盖率 |
|---------|-----------|-----------|
| 工具函数 | __% | __% |
| 业务逻辑 | __% | __% |
| UI 组件 | __% | __% |
| 整体项目 | __% | __% |
```

### 3. 测试命名规范

```markdown
## 测试命名规范

- 单元测试文件: `[填写格式,如: *.test.ts / *_test.go]`
- 集成测试文件: `[填写]`
- E2E 测试文件: `[填写]`

测试函数命名: `[填写: test_xxx / it('should xxx') / etc.]`
```

---

## 📚 通用测试原则 (已提供)

以下是**技术栈无关**的测试原则,适用于所有项目:

### 测试金字塔

```
      ╱▔▔▔▔▔▔▔╲
     ╱  E2E     ╲    10% - 慢,昂贵,集成度高
    ╱─────────────╲
   ╱  Integration  ╲  30% - 中等速度,测试模块交互
  ╱─────────────────╲
 ╱     Unit          ╲ 60% - 快速,便宜,孤立测试
╱───────────────────────╲
```

**原则:**
- 单元测试应该占大多数 (60%)
- 集成测试适量 (30%)
- E2E 测试最少 (10%)

### AAA 模式

所有测试应遵循 **Arrange-Act-Assert** 模式:

```
1. Arrange (准备):  设置测试数据和环境
2. Act (执行):      执行被测试的操作
3. Assert (断言):   验证结果是否符合预期
```

### 测试独立性

- ✅ 每个测试必须独立运行
- ✅ 测试之间不能有依赖关系
- ✅ 测试顺序不应影响结果
- ✅ 每个测试自己准备所需数据

### Mock 最小化原则

- ✅ 只 Mock 你无法控制的部分 (外部 API、数据库、文件系统)
- ❌ 不要 Mock 内部业务逻辑
- ❌ 不要过度 Mock (导致测试脆弱)

---

## ✅ 完成检查清单

在开始项目开发前,请确认已完成:

- [ ] 已填写测试技术栈
- [ ] 已定义覆盖率目标
- [ ] 已制定测试命名规范
- [ ] 已配置测试框架 (package.json / requirements.txt / etc.)
- [ ] 已编写第一个测试示例
- [ ] 已配置 CI 自动运行测试

---

## 🔗 参考资料

完整的测试策略示例,请参考:

- **JavaScript/TypeScript 项目**: 使用 Vitest + Playwright 的完整配置
- **Python 项目**: 使用 pytest + coverage 的完整配置
- **Go 项目**: 使用内置 testing 包的完整配置

(你可以在其他项目中找到这些示例,或者参考官方文档)

---

## 📝 提示

如果你需要帮助,可以向 AI 助手提问:

```
请帮我为 [项目名称] 补充 testing-strategy.md 文件。

项目技术栈:
- 语言: [JavaScript/Python/Go/etc.]
- 框架: [Next.js/Django/Gin/etc.]
- 测试框架: [Vitest/pytest/etc.]

请根据最佳实践,提供完整的测试策略和配置示例。
```

---

**⚠️ 重要**: 删除本提示部分,替换为项目实际的测试策略!
