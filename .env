# ========================================
# QuantFu 期货量化管理平台 - 环境变量配置
# ========================================

# ----------------------------------------
# PostgreSQL 数据库配置
# ----------------------------------------
POSTGRES_PASSWORD=XwEpGOeuF1jqrYxMigdFigxComCXEhGa
POSTGRES_DB=postgres
POSTGRES_USER=postgres

# PostgREST authenticator 用户密码
AUTHENTICATOR_PASSWORD=XwEpGOeuF1jqrYxMigdFigxComCXEhGa

# 数据库连接URL (后端使用)
DATABASE_URL=postgresql://postgres:XwEpGOeuF1jqrYxMigdFigxComCXEhGa@localhost:5432/postgres

# ----------------------------------------
# Supabase 配置
# ----------------------------------------
# JWT密钥 (至少32字符,用于API认证)
JWT_SECRET=vm_Hx1CRp_r3Mr5NanvZJQ82lIu3fkAMl-tinZdnyQ05hMBk6AUai99K828JZ-Lf

# Realtime 密钥
SECRET_KEY_BASE=vm_Hx1CRp_r3Mr5NanvZJQ82lIu3fkAMl-tinZdnyQ05hMBk6AUai99K828JZ-Lf

# Meta 加密密钥
PG_META_CRYPTO_KEY=vm_Hx1CRp_r3Mr5NanvZJQ82lIu3fkAMl-tinZdnyQ05hMBk6AUai99K828JZ-Lf

# Supabase匿名密钥 (使用项目JWT_SECRET生成)
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJvbGUiOiJhbm9uIiwiZXhwIjoxOTgzODEyOTk2fQ.PkHFChAetX7x5ikM0bhAw9nHwsF-o1nW0EQNH6EQ7bA

# Supabase服务密钥 (使用项目JWT_SECRET生成)
SUPABASE_SERVICE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJvbGUiOiJzZXJ2aWNlX3JvbGUiLCJleHAiOjE5ODM4MTI5OTZ9.3rgGpSnxAIA2ZiCefUoESiusE3lSHmMZH-R9CMdXME0

# Supabase URL (本地开发)
SUPABASE_URL=http://localhost:8000

# ----------------------------------------
# 天勤TqSDK配置
# ----------------------------------------
# 天勤账号 (https://www.shinnytech.com/ 注册)
TQSDK_USER=your-tq-username-change-me

# 天勤密码
TQSDK_PASSWORD=your-tq-password-change-me

# 天勤WebSocket URL (可选,默认使用官方地址)
# TQSDK_WS_URL=wss://openmd.shinnytech.com/t/md/front/mobile

# ----------------------------------------
# FastAPI 后端配置
# ----------------------------------------
# 后端服务端口
BACKEND_PORT=8888
BACKEND_HOST=0.0.0.0

# 后端服务地址 (前端使用)
NEXT_PUBLIC_API_URL=http://localhost:8888

# CORS允许的源 (多个用逗号分隔)
CORS_ORIGINS=http://localhost:3000,http://localhost:3001

# 日志级别 (DEBUG, INFO, WARNING, ERROR)
LOG_LEVEL=INFO

# ----------------------------------------
# Next.js 前端配置
# ----------------------------------------
# Supabase公开配置 (前端使用)
NEXT_PUBLIC_SUPABASE_URL=http://localhost:8000
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJvbGUiOiJhbm9uIiwiZXhwIjoxOTgzODEyOTk2fQ.PkHFChAetX7x5ikM0bhAw9nHwsF-o1nW0EQNH6EQ7bA
NEXT_PUBLIC_BACKEND_URL=http://localhost:8888

# ----------------------------------------
# 极星量化配置
# ----------------------------------------
# 极星数据推送地址 (后端接收)
POLAR_WEBHOOK_URL=http://localhost:8888/api/trades

# 极星API密钥 (用于验证推送来源)
POLAR_API_KEY=your-polar-api-key-change-me

# ----------------------------------------
# 通知配置
# ----------------------------------------
# Ntfy通知地址
NTFY_URL=https://ntfy.zmddg.com/claude

# 邮件通知 (可选)
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=your-email@gmail.com
# SMTP_PASSWORD=your-app-password
# SMTP_FROM=your-email@gmail.com
# ALERT_EMAIL=your-alert-email@gmail.com

# 微信通知 (可选,企业微信机器人)
# WECHAT_WEBHOOK_URL=https://qyapi.weixin.qq.com/cgi-bin/webhook/send?key=xxx

# ----------------------------------------
# 风控配置
# ----------------------------------------
# 单账户最大持仓 (手)
MAX_POSITION_PER_ACCOUNT=100

# 单品种最大持仓 (手)
MAX_POSITION_PER_SYMBOL=50

# 最大滑点容忍 (跳)
MAX_SLIPPAGE_TICKS=5

# 风险度预警阈值 (%)
RISK_WARNING_THRESHOLD=80

# 风险度强平阈值 (%)
RISK_FORCE_CLOSE_THRESHOLD=95

# ----------------------------------------
# 换月配置
# ----------------------------------------
# 换月提前天数
ROLLOVER_ADVANCE_DAYS=7

# 主力合约持仓量阈值 (%)
MAIN_CONTRACT_VOLUME_THRESHOLD=30

# ----------------------------------------
# 性能配置
# ----------------------------------------
# 行情推送间隔 (毫秒)
MARKET_DATA_INTERVAL=1000

# WebSocket心跳间隔 (秒)
WEBSOCKET_HEARTBEAT_INTERVAL=30

# 数据库连接池大小
DB_POOL_SIZE=20

# Redis配置 (可选,用于缓存)
# REDIS_URL=redis://localhost:6379/0
# REDIS_PASSWORD=your-redis-password

# ----------------------------------------
# 开发/生产环境标识
# ----------------------------------------
NODE_ENV=development
PYTHON_ENV=development

# ========================================
# 配置说明
# ========================================
#
# ⚠️ 必改项 (生产环境务必修改):
#   1. POSTGRES_PASSWORD - 数据库密码
#   2. JWT_SECRET - JWT密钥
#   3. TQSDK_USER - 天勤账号
#   4. TQSDK_PASSWORD - 天勤密码
#   5. POLAR_API_KEY - 极星API密钥
#
# 可选项:
#   - 通知配置 (Ntfy/邮件/微信)
#   - Redis缓存
#   - 风控参数调整
#
# 快速开始:
#   1. 复制此文件: cp .env.example .env
#   2. 修改必改项
#   3. 启动服务: docker-compose up -d
#   4. 测试连接: cd backend && python test_tqsdk.py
#
# ========================================
